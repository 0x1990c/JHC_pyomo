

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Common Warnings/Errors &mdash; Pyomo 6.5.1.dev0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Developer Reference" href="developer_reference/index.html" />
    <link rel="prev" title="API reference" href="advanced_topics/flattener/reference.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Pyomo
          

          
          </a>

          
            
            
              <div class="version">
                6.5.1.dev0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="citing_pyomo.html">Citing Pyomo</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyomo_overview/index.html">Pyomo Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyomo_modeling_components/index.html">Pyomo Modeling Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="solving_pyomo_models.html">Solving Pyomo Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_models.html">Working with Pyomo Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_abstractmodels/index.html">Working with Abstract Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="model_transformations/index.html">Model Transformations</a></li>
<li class="toctree-l1"><a class="reference internal" href="modeling_extensions/index.html">Modeling Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_examples.html">Pyomo Tutorial Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="model_debugging/index.html">Debugging Pyomo Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_topics/index.html">Advanced Topics</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Common Warnings/Errors</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#warnings">Warnings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#w1001-setting-var-value-not-in-domain">W1001: Setting Var value not in domain</a></li>
<li class="toctree-l3"><a class="reference internal" href="#w1002-setting-var-value-outside-the-bounds">W1002: Setting Var value outside the bounds</a></li>
<li class="toctree-l3"><a class="reference internal" href="#w1003-unexpected-recursionerror-walking-an-expression-tree">W1003: Unexpected RecursionError walking an expression tree</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#errors">Errors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#e2001-variable-domains-must-be-an-instance-of-a-pyomo-set">E2001: Variable domains must be an instance of a Pyomo Set</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="developer_reference/index.html">Developer Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="library_reference/index.html">Library Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribution_guide.html">Contributing to Pyomo</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributed_packages/index.html">Third-Party Contributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="related_packages.html">Related Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="bibliography.html">Bibliography</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Pyomo</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Common Warnings/Errors</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/errors.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="common-warnings-errors">
<h1>Common Warnings/Errors<a class="headerlink" href="#common-warnings-errors" title="Permalink to this headline">¶</a></h1>
<div class="section" id="warnings">
<h2>Warnings<a class="headerlink" href="#warnings" title="Permalink to this headline">¶</a></h2>
<div class="section" id="w1001-setting-var-value-not-in-domain">
<span id="w1001"></span><h3>W1001: Setting Var value not in domain<a class="headerlink" href="#w1001-setting-var-value-not-in-domain" title="Permalink to this headline">¶</a></h3>
<p>When setting <a class="reference internal" href="library_reference/aml/index.html#pyomo.environ.Var" title="pyomo.environ.Var"><code class="xref py py-class docutils literal notranslate"><span class="pre">Var</span></code></a> values (by either calling <a class="reference internal" href="library_reference/aml/index.html#pyomo.environ.Var.set_value" title="pyomo.environ.Var.set_value"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Var.set_value()</span></code></a>
or setting the <code class="xref py py-attr docutils literal notranslate"><span class="pre">value</span></code> attribute), Pyomo will validate the
incoming value by checking that the value is <code class="docutils literal notranslate"><span class="pre">in</span></code> the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">Var.domain</span></code>.  Any values not in the domain will generate this
warning:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">ConcreteModel</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Var</span><span class="p">(</span><span class="n">domain</span><span class="o">=</span><span class="n">pyo</span><span class="o">.</span><span class="n">Integers</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="go">WARNING (W1001): Setting Var &#39;x&#39; to a value `0.5` (float) not in domain</span>
<span class="go">     Integers.</span>
<span class="go">     See also https://pyomo.readthedocs.io/en/stable/errors.html#w1001</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="go">0.5</span>
</pre></div>
</div>
<p>Users can bypass all domain validation by setting the value using:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="mf">0.75</span><span class="p">,</span> <span class="n">skip_validation</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="go">0.75</span>
</pre></div>
</div>
</div>
<div class="section" id="w1002-setting-var-value-outside-the-bounds">
<span id="w1002"></span><h3>W1002: Setting Var value outside the bounds<a class="headerlink" href="#w1002-setting-var-value-outside-the-bounds" title="Permalink to this headline">¶</a></h3>
<p>When setting <a class="reference internal" href="library_reference/aml/index.html#pyomo.environ.Var" title="pyomo.environ.Var"><code class="xref py py-class docutils literal notranslate"><span class="pre">Var</span></code></a> values (by either calling <code class="xref py py-meth docutils literal notranslate"><span class="pre">set_value()</span></code>
or setting the <code class="xref py py-attr docutils literal notranslate"><span class="pre">value</span></code> attribute), Pyomo will validate the
incoming value by checking that the value is within the range specified by
<code class="xref py py-attr docutils literal notranslate"><span class="pre">Var.bounds</span></code>.  Any values outside the bounds will generate this
warning:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">ConcreteModel</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Var</span><span class="p">(</span><span class="n">domain</span><span class="o">=</span><span class="n">pyo</span><span class="o">.</span><span class="n">Integers</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="go">WARNING (W1002): Setting Var &#39;x&#39; to a numeric value `0` outside the bounds</span>
<span class="go">    (1, 5).</span>
<span class="go">    See also https://pyomo.readthedocs.io/en/stable/errors.html#w1002</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="go">0</span>
</pre></div>
</div>
<p>Users can bypass all domain validation by setting the value using:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">skip_validation</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="go">10</span>
</pre></div>
</div>
</div>
<div class="section" id="w1003-unexpected-recursionerror-walking-an-expression-tree">
<span id="w1003"></span><h3>W1003: Unexpected RecursionError walking an expression tree<a class="headerlink" href="#w1003-unexpected-recursionerror-walking-an-expression-tree" title="Permalink to this headline">¶</a></h3>
<p>Pyomo leverages a recursive walker (the
<code class="xref py py-class docutils literal notranslate"><span class="pre">StreamBasedExpressionVisitor</span></code>) to
traverse (walk) expression trees.  For most expressions, this recursive
walker is the most efficient.  However, Python has a relatively shallow
recursion limit (generally, 1000 frames).  The recursive walker is
designed to monitor the stack depth and cleanly switch to a nonrecursive
walker before hitting the stack limit.  However, there are two (rare)
cases where the Python stack limit can still generate a
<a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RecursionError" title="(in Python v3.11)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">RecursionError</span></code></a> exception:</p>
<ol class="arabic simple">
<li>Starting the walker with fewer than
<code class="xref py py-data docutils literal notranslate"><span class="pre">pyomo.core.expr.visitor.RECURSION_LIMIT</span></code> available frames.</li>
<li>Callbacks that require more than 2 *
<code class="xref py py-data docutils literal notranslate"><span class="pre">pyomo.core.expr.visitor.RECURSION_LIMIT</span></code> frames.</li>
</ol>
<p>The (default) recursive walker will catch the exception and restart the
walker from the beginning in non-recursive mode, issuing this warning.
The caution is that any partial work done by the walker before the
exception was raised will be lost, potentially leaving the walker in an
inconsistent state.  Users can avoid this by</p>
<ul class="simple">
<li>avoiding recursive callbacks</li>
<li>restructuring the system design to avoid triggering the walker with
few available stack frames</li>
<li>directly calling the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">walk_expression_nonrecursive()</span></code>
walker method</li>
</ul>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pyomo.core.expr.visitor</span> <span class="k">as</span> <span class="nn">visitor</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyomo.core.tests.unit.test_visitor</span> <span class="kn">import</span> <span class="n">fill_stack</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expression_depth</span> <span class="o">=</span> <span class="n">visitor</span><span class="o">.</span><span class="n">StreamBasedExpressionVisitor</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">exitNode</span><span class="o">=</span><span class="k">lambda</span> <span class="n">node</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">data</span> <span class="k">else</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">ConcreteModel</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Var</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@m</span><span class="o">.</span><span class="n">Expression</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">35</span><span class="p">))</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">e</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">m</span><span class="o">.</span><span class="n">e</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="n">i</span> <span class="k">else</span> <span class="n">m</span><span class="o">.</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expression_depth</span><span class="o">.</span><span class="n">walk_expression</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">e</span><span class="p">[</span><span class="mi">34</span><span class="p">])</span>
<span class="go">36</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fill_stack</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">getrecursionlimit</span><span class="p">()</span> <span class="o">-</span> <span class="n">visitor</span><span class="o">.</span><span class="n">get_stack_depth</span><span class="p">()</span> <span class="o">-</span> <span class="mi">30</span><span class="p">,</span>
<span class="gp">... </span>           <span class="n">expression_depth</span><span class="o">.</span><span class="n">walk_expression</span><span class="p">,</span>
<span class="gp">... </span>           <span class="n">m</span><span class="o">.</span><span class="n">e</span><span class="p">[</span><span class="mi">34</span><span class="p">])</span>
<span class="go">WARNING (W1003): Unexpected RecursionError walking an expression tree.</span>
<span class="go">    See also https://pyomo.readthedocs.io/en/stable/errors.html#w1003</span>
<span class="go">36</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fill_stack</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">getrecursionlimit</span><span class="p">()</span> <span class="o">-</span> <span class="n">visitor</span><span class="o">.</span><span class="n">get_stack_depth</span><span class="p">()</span> <span class="o">-</span> <span class="mi">30</span><span class="p">,</span>
<span class="gp">... </span>           <span class="n">expression_depth</span><span class="o">.</span><span class="n">walk_expression_nonrecursive</span><span class="p">,</span>
<span class="gp">... </span>           <span class="n">m</span><span class="o">.</span><span class="n">e</span><span class="p">[</span><span class="mi">34</span><span class="p">])</span>
<span class="go">36</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="errors">
<h2>Errors<a class="headerlink" href="#errors" title="Permalink to this headline">¶</a></h2>
<div class="section" id="e2001-variable-domains-must-be-an-instance-of-a-pyomo-set">
<span id="e2001"></span><h3>E2001: Variable domains must be an instance of a Pyomo Set<a class="headerlink" href="#e2001-variable-domains-must-be-an-instance-of-a-pyomo-set" title="Permalink to this headline">¶</a></h3>
<p>Variable domains are always Pyomo <a class="reference internal" href="library_reference/aml/index.html#pyomo.environ.Set" title="pyomo.environ.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a> or <a class="reference internal" href="library_reference/aml/index.html#pyomo.environ.RangeSet" title="pyomo.environ.RangeSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">RangeSet</span></code></a>
objects.  This includes global sets like <code class="docutils literal notranslate"><span class="pre">Reals</span></code>, <code class="docutils literal notranslate"><span class="pre">Integers</span></code>,
<code class="docutils literal notranslate"><span class="pre">Binary</span></code>, <code class="docutils literal notranslate"><span class="pre">NonNegativeReals</span></code>, etc., as well as model-specific
<a class="reference internal" href="library_reference/aml/index.html#pyomo.environ.Set" title="pyomo.environ.Set"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a> instances.  The <code class="xref py py-attr docutils literal notranslate"><span class="pre">Var.domain</span></code> setter will attempt to
convert assigned values to a Pyomo <cite>Set</cite>, with any failures leading to
this warning (and an exception from the converter):</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">ConcreteModel</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Var</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">domain</span> <span class="o">=</span> <span class="mi">5</span>
<span class="gt">Traceback (most recent call last):</span>
   <span class="c">...</span>
<span class="gr">TypeError</span>: <span class="n">Cannot create a Set from data that does not support __contains__...</span>
<span class="go">ERROR (E2001): 5 is not a valid domain. Variable domains must be an instance</span>
<span class="go">    of a Pyomo Set or convertible to a Pyomo Set.</span>
<span class="go">    See also https://pyomo.readthedocs.io/en/stable/errors.html#e2001</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="developer_reference/index.html" class="btn btn-neutral float-right" title="Developer Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="advanced_topics/flattener/reference.html" class="btn btn-neutral float-left" title="API reference" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2008-2023, Sandia National Laboratories.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>